<th:block th:replace="normal-user/base::layout(~{::section}, ~{::title})">
    <title>All Contacts</title>
    <section id="all-contacts-section">
        <div class="container glass-bg" id="all-contacts-card">
            <div class="table-responsive">
                <h1 class="text-center">Contacts</h1>
                <div class="container mb-3">
                    <input type="text" id="con-search" onkeyup="searchContact(this)" class="form-control w-responsive cont-search" placeholder="Search contact by name">
                </div>
                <!--SEARCH RESULTS-->
                <table class="table table-striped" id="search-tbl" style="display: none">
                </table>
                <!-- DELETE POPUP-->
                <div th:if="${isDeleted}" id="con-del-popup"></div>
                <table class="table table-striped" id="con-tbl">
                    <thead class="thead-dark">
                    <tr>
                        <th scope="col" class="text-center">Favorite</th>
                        <th scope="col">
                            <a th:href="@{'/user/view-contacts/'+${currentPage}(sortField='name',sortDir=${reverseSortDir})}">Name
                                <i class="fa-solid fa-sort"></i></a></th>
                        <th scope="col">Email</th>
                        <th scope="col">Phone</th>
                        <th scope="col" colspan="2" class="text-center">Action</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="c : ${contacts}">
                        <th scope="row" class="text-center"><i class="fa-regular fa-star"></i></th>
                        <td>
                            <img th:src="@{'/image/uploads/'+${c.profileImg}}" alt="img" class="con-profile-img"/>
                            &nbsp; <span th:text="${c.name}"></span>
                        </td>
                        <td>
                            <a th:text="${c.email}" th:href="@{'/user/contact/'+${c.id}}"></a>
                        </td>
                        <td th:text="${c.phone}"></td>
                        <td class="text-center">
                            <a th:onclick="|deleteContact(${c.id})|" class="action-icon"><i class="fa-solid fa-trash-can" style="color: #e35959;"></i></a>
                        </td>
                        <td class="text-center">
                            <a th:href="@{'/user/edit-contact/'+${c.id}}" class="action-icon"><i class="fa-solid fa-pen-to-square" style="color: #4094e2;"></i></a>
                        </td>
                    </tr>
                    </tbody>
                </table>
                <nav aria-label="...">
                    <ul class="pagination">
                        <li class="page-item" th:if="${currentPage!=0}">
                            <a class="page-link" th:href="@{'/user/view-contacts/'+${currentPage-1}(sortField='name',sortDir=${sortDir})}">Previous</a>
                        </li>
                        <li th:classappend="${currentPage==i-1 ? 'active':''}" th:each="i : ${#numbers.sequence(1,totalPages)}" class="page-item">
                            <a class="page-link" th:if="${i}!=0" th:href="@{'/user/view-contacts/'+${i-1}(sortField='name',sortDir=${sortDir})}" th:text="${i}"></a>
                        </li>
                        <li class="page-item" th:if="${currentPage<totalPages-1}">
                            <a class="page-link" th:href="@{'/user/view-contacts/'+${currentPage+1}(sortField='name',sortDir=${sortDir})}">Next</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </section>
</th:block>